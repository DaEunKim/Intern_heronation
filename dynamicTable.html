<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html"; charset="utf-8">

    <title>Dani World~</title>
    <link rel="stylesheet" type="text/css" href="./dynamicTable.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
    <script>
    function add() {
      $.ajax({
        url: "/test/dani/dynamicTable.php",
        type: "GET",
        datatype:"JSON",
        data: {
          Product_PKey:$('input[name=Product_PKey]').val()
        },
        success : function(data){
          var jsonData = JSON.parse(data);
          makeTable(jsonData);
        },
        error : function(){
          alert('통신실패!!');
        }
      });
    }
    function makeTable(jsonData) {
      $('#print_text').empty();
      var row = jsonData.length;
      // var col = jsonData['Product'].length;
      // alert(col);

      var strTable = "<table border = '1px'>";

      strTable += "<tr>";
      strTable += "<th>"+ jsonData[0]['Product'] + " "+jsonData[0]['Category']+ "</th> ";
      strTable += "</tr>";

      strTable += "<tr>";
      strTable += "<td></td>";

      strTable += "<td>"+jsonData[0]['SizeType']+ "</td>";
      strTable += "<td>"+jsonData[1]['SizeType']+"</td>";
      strTable += "<td>"+jsonData[2]['SizeType']+"</td>";
      strTable += "</tr>";


      strTable += "<tr>";
      strTable += "<td>"+jsonData[0]['ProductSizeList']+ "</td>"
      for(var i=0; i<row/3; i++){
        strTable += "<td>"+ jsonData[i]['Size']+ "</td>";
      }
      strTable += "</tr>";

      strTable += "<tr>";
      strTable += "<td>"+jsonData[3]['ProductSizeList']+ "</td>";
      for(var i=3; i<6; i++){
        strTable += "<td>"+ jsonData[i]['Size']+ "</td>";
      }
      strTable += "</tr>";

      strTable += "<tr>";
      strTable += "<td>"+jsonData[6]['ProductSizeList']+ "</td>";
      for(var i=6; i<row; i++){
        strTable += "<td>"+ jsonData[i]['Size']+ "</td>";
      }

      strTable += "</tr>";

      strTable += "</table>";

      $("#print_text").append(strTable);
 }
  </script>
  </head>

  <body>
    <div id='container' action="/test/dani/dynamicTable.php" method="GET" >
      <div id='box-center'>
        Product 테이블의 PKey값<br>
        <input id="inputCss" type="text" name="Product_PKey" value=" ">
        <button id="submitButton" type="button" onclick="add()" value="submit"> submit </button>
      </div>
    </div>

    <div id="print_text">

    </div>


  </body>
</html>
